<div class="layout-container" [class.sidebar-closed]="!sidebarOpen()" [class.sidebar-open]="sidebarOpen()">
  <!-- Sidebar -->
  <aside class="sidebar" [class.open]="sidebarOpen()" (mouseenter)="onSidebarEnter()" (mouseleave)="onSidebarLeave()" (click)="$event.stopPropagation()">
    <div class="sidebar-header">
      <div class="logo">
        <span class="logo-icon">âš–ï¸</span>
        <span class="logo-text">Smart Lawyer</span>
      </div>
    </div>

    <nav class="sidebar-nav">
      @for (item of menuItems; track item.route) {
        <a
          [routerLink]="item.route"
          routerLinkActive="active"
          class="nav-item"
          [title]="item.label"
          (click)="closeSidebarOnMobile()"
        >
          <span class="nav-icon">{{ item.icon }}</span>
          <span class="nav-label">{{ item.label }}</span>
        </a>
      }
    </nav>

  </aside>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Header -->
    <header class="top-header">
      <div class="header-left">
        <button class="menu-toggle" (click)="toggleSidebar()">
          <span>â˜°</span>
        </button>
        <h2 class="page-title">Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ {{ userFullName() }}</h2>
      </div>

      <div class="header-right">
        <button class="icon-button" title="Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª">
          <span class="notification-badge">3</span>
          ğŸ””
        </button>

        <div class="user-menu-container">
          <button class="user-avatar" (click)="toggleUserMenu()">
            {{ userInitials() }}
          </button>

          @if (userMenuOpen()) {
            <div class="user-menu">
              <div class="user-menu-header">
                <div class="user-avatar-large">{{ userInitials() }}</div>
                <div class="user-info">
                  <div class="user-name">{{ userFullName() }}</div>
                  <div class="user-email">{{ userEmail() }}</div>
                  @if (userRole()) {
                    <div class="user-role">{{ userRole() }}</div>
                  }
                </div>
              </div>

              <div class="user-menu-items">
                <a routerLink="/profile" class="user-menu-item">
                  <span>ğŸ‘¤</span> Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ
                </a>
                <a routerLink="/settings" class="user-menu-item">
                  <span>âš™ï¸</span> Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
                </a>
                <button class="user-menu-item logout" (click)="logout()">
                  <span>ğŸšª</span> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
                </button>
              </div>
            </div>
          }
        </div>
      </div>
    </header>

    <!-- Page Content -->
    <main class="page-content">
      <router-outlet></router-outlet>
    </main>
  </div>
</div>

@if (userMenuOpen()) {
  <div class="overlay user-menu-overlay" (click)="toggleUserMenu()"></div>
}

<!-- Sidebar Overlay for Mobile -->
@if (sidebarOpen() && isMobile()) {
  <div class="overlay sidebar-overlay" (click)="closeSidebarOnMobile()"></div>
}
