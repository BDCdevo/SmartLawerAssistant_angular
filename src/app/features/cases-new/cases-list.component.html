<div class="cases-container" dir="rtl">
  <!-- Compact Header -->
  <div class="page-header-compact">
    <h1 class="header-title">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù‚Ø¶Ø§ÙŠØ§</h1>
    <div class="header-actions">
      <button class="action-btn btn-secondary" (click)="onSearch()" [disabled]="loading()">
        <span class="btn-icon" [class.spinning]="loading()">ğŸ”„</span>
        <span>ØªØ­Ø¯ÙŠØ«</span>
      </button>
      <button class="action-btn btn-primary" (click)="createCase()">
        <span class="btn-icon">â•</span>
        <span>Ø¥Ø¶Ø§ÙØ© Ù‚Ø¶ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©</span>
      </button>
    </div>
  </div>

  <!-- Compact Filters - Single Row -->
  <div class="filters-compact">
    <div class="search-group">
      <input
        type="text"
        [value]="searchQuery()"
        (input)="searchQuery.set($any($event.target).value)"
        (keyup.enter)="onSearch()"
        placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¨Ø±Ù‚Ù… Ø§Ù„Ù‚Ø¶ÙŠØ©ØŒ Ø§Ù„Ø³Ù†Ø©ØŒ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø£Ùˆ Ø§Ù„Ù…Ø­ÙƒÙ…Ø©..."
      />
    </div>
    <div class="filter-group">
      <select
        [value]="selectedStatus()"
        (change)="selectedStatus.set($any($event.target).value); onStatusChange()"
      >
        @for (status of statusOptions; track status.value) {
          <option [value]="status.value">{{ status.label }}</option>
        }
      </select>
    </div>
    <button class="search-btn" (click)="onSearch()">Ø¨Ø­Ø«</button>
    <button class="clear-filters-btn" (click)="clearSearch()">ğŸ—‘ï¸ Ù…Ø³Ø­</button>
  </div>

  <!-- Error Message -->
  @if (error()) {
    <div class="error-message">
      âš ï¸ {{ error() }}
    </div>
  }

  <!-- Loading Spinner -->
  @if (loading()) {
    <div class="loading-container">
      <div class="spinner"></div>
      <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ø¶Ø§ÙŠØ§...</p>
    </div>
  }

  <!-- Empty State -->
  @if (isEmpty()) {
    <div class="empty-state">
      <div class="empty-icon">ğŸ“‹</div>
      <h3 class="empty-title">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù‚Ø¶Ø§ÙŠØ§</h3>
      <p class="empty-message">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø£ÙŠ Ù‚Ø¶Ø§ÙŠØ§. Ø§Ø¨Ø¯Ø£ Ø¨Ø¥Ø¶Ø§ÙØ© Ù‚Ø¶ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©.</p>
      <button class="action-btn btn-primary" (click)="createCase()">
        <span class="btn-icon">â•</span>
        <span>Ø¥Ø¶Ø§ÙØ© Ù‚Ø¶ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©</span>
      </button>
    </div>
  }

  <!-- Cases Table -->
  @if (hasData() && !loading()) {
    <div class="table-container">
      <table class="data-table">
        <thead>
          <tr>
            <th>Ø±Ù‚Ù… Ø§Ù„Ù‚Ø¶ÙŠØ©</th>
            <th>Ø§Ù„Ø³Ù†Ø©</th>
            <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
            <th>Ø§Ù„Ø¹Ù…ÙŠÙ„</th>
            <th>Ø§Ù„Ù…Ø­ÙƒÙ…Ø©</th>
            <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡</th>
            <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
          </tr>
        </thead>
        <tbody>
          @for (caseItem of cases(); track trackByCase($index, caseItem)) {
            <tr>
              <td>
                <div class="case-number">{{ caseItem.number }}</div>
              </td>
              <td>{{ caseItem.year }}</td>
              <td>
                <span class="status-badge {{ getStatusClass(caseItem.status) }}">
                  {{ getStatusLabel(caseItem.status) }}
                </span>
              </td>
              <td>{{ caseItem.client?.fullName || '-' }}</td>
              <td>{{ caseItem.court?.nameAr || '-' }}</td>
              <td>
                <div class="date-text">{{ formatDate(caseItem.createdAt) }}</div>
              </td>
              <td class="actions-cell">
                <button class="action-btn btn-view" (click)="viewCase(caseItem)" title="Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„">ğŸ‘ï¸</button>
                <button class="action-btn btn-edit" (click)="editCase(caseItem)" title="ØªØ¹Ø¯ÙŠÙ„">âœï¸</button>
                <button class="action-btn btn-delete" (click)="deleteCase(caseItem)" title="Ø­Ø°Ù">ğŸ—‘ï¸</button>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>

    <!-- Pagination -->
    @if (showPagination()) {
      <div class="pagination-container">
        <div class="pagination-info">
          Ø¹Ø±Ø¶ <strong>{{ (currentPage() - 1) * pageSize() + 1 }}</strong> -
          <strong>{{ Math.min(currentPage() * pageSize(), totalCount()) }}</strong>
          Ù…Ù† <strong>{{ totalCount() }}</strong> Ù‚Ø¶ÙŠØ©
        </div>
        <div class="pagination-controls">
          <button class="page-btn prev-btn" (click)="previousPage()" [disabled]="currentPage() === 1">
            Ø§Ù„Ø³Ø§Ø¨Ù‚
          </button>
          @for (page of paginationPages(); track page) {
            <button class="page-btn" [class.active]="page === currentPage()" (click)="goToPage(page)">
              {{ page }}
            </button>
          }
          <button class="page-btn next-btn" (click)="nextPage()" [disabled]="currentPage() === totalPages()">
            Ø§Ù„ØªØ§Ù„ÙŠ
          </button>
        </div>
      </div>
    }
  }
</div>
