<div class="register-container">
  <div class="register-card">
    <div class="register-header">
      <h1>Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</h1>
      <p>Ø§Ù†Ø¶Ù… Ø¥Ù„Ù‰ Smart Lawyer Portal</p>
    </div>

    @if (error()) {
      <div class="alert alert-error">
        {{ error() }}
      </div>
    }

    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="register-form">
      <div class="form-row">
        <div class="form-group">
          <label for="firstName">Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø£ÙˆÙ„</label>
          <input
            type="text"
            id="firstName"
            formControlName="firstName"
            placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø£ÙˆÙ„"
            [class.invalid]="firstName?.invalid && firstName?.touched"
          />
          @if (firstName?.invalid && firstName?.touched) {
            <span class="error-message">Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø£ÙˆÙ„ Ù…Ø·Ù„ÙˆØ¨</span>
          }
        </div>

        <div class="form-group">
          <label for="lastName">Ø§Ø³Ù… Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©</label>
          <input
            type="text"
            id="lastName"
            formControlName="lastName"
            placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©"
            [class.invalid]="lastName?.invalid && lastName?.touched"
          />
          @if (lastName?.invalid && lastName?.touched) {
            <span class="error-message">Ø§Ø³Ù… Ø§Ù„Ø¹Ø§Ø¦Ù„Ø© Ù…Ø·Ù„ÙˆØ¨</span>
          }
        </div>
      </div>

      <div class="form-group">
        <label for="email">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
        <div class="input-with-validation">
          <input
            type="email"
            id="email"
            formControlName="email"
            placeholder="example@email.com"
            [class.invalid]="email?.invalid && email?.touched"
            [class.valid]="email?.valid && email?.touched && emailAvailable()"
          />
          @if (checkingEmail()) {
            <span class="validation-spinner">â³</span>
          }
          @if (!checkingEmail() && email?.touched && email?.valid) {
            @if (emailAvailable() === true) {
              <span class="validation-success">âœ“</span>
            }
            @if (emailAvailable() === false) {
              <span class="validation-error">âœ—</span>
            }
          }
        </div>
        @if (email?.invalid && email?.touched) {
          <span class="error-message">
            @if (email?.errors?.['required']) {
              Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…Ø·Ù„ÙˆØ¨
            }
            @if (email?.errors?.['email']) {
              Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­
            }
            @if (email?.errors?.['emailTaken']) {
              Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„ÙØ¹Ù„
            }
          </span>
        }
      </div>

      <div class="form-group">
        <label for="phoneNumber">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
        <div class="input-with-validation">
          <input
            type="tel"
            id="phoneNumber"
            formControlName="phoneNumber"
            placeholder="01012345678"
            [class.invalid]="phoneNumber?.invalid && phoneNumber?.touched"
            [class.valid]="phoneNumber?.valid && phoneNumber?.touched && phoneAvailable()"
          />
          @if (checkingPhone()) {
            <span class="validation-spinner">â³</span>
          }
          @if (!checkingPhone() && phoneNumber?.touched && phoneNumber?.valid) {
            @if (phoneAvailable() === true) {
              <span class="validation-success">âœ“</span>
            }
            @if (phoneAvailable() === false) {
              <span class="validation-error">âœ—</span>
            }
          }
        </div>
        @if (phoneNumber?.invalid && phoneNumber?.touched) {
          <span class="error-message">
            @if (phoneNumber?.errors?.['required']) {
              Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ù…Ø·Ù„ÙˆØ¨
            }
            @if (phoneNumber?.errors?.['pattern']) {
              Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ¨Ø¯Ø£ Ø¨Ù€ 010, 011, 012, Ø£Ùˆ 015
            }
            @if (phoneNumber?.errors?.['phoneTaken']) {
              Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„ÙØ¹Ù„
            }
          </span>
        }
      </div>

      <div class="form-group">
        <label for="city">Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</label>
        <input
          type="text"
          id="city"
          formControlName="city"
          placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©"
          [class.invalid]="city?.invalid && city?.touched"
        />
        @if (city?.invalid && city?.touched) {
          <span class="error-message">Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ù…Ø·Ù„ÙˆØ¨Ø©</span>
        }
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="password">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
          <div class="password-input">
            <input
              [type]="showPassword() ? 'text' : 'password'"
              id="password"
              formControlName="password"
              placeholder="********"
              [class.invalid]="password?.invalid && password?.touched"
            />
            <button
              type="button"
              class="toggle-password"
              (click)="togglePasswordVisibility('password')"
            >
              {{ showPassword() ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}
            </button>
          </div>
          @if (password?.invalid && password?.touched) {
            <span class="error-message">
              @if (password?.errors?.['required']) {
                ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù…Ø·Ù„ÙˆØ¨Ø©
              }
              @if (password?.errors?.['minlength']) {
                6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„
              }
            </span>
          }
        </div>

        <div class="form-group">
          <label for="confirmPassword">ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
          <div class="password-input">
            <input
              [type]="showConfirmPassword() ? 'text' : 'password'"
              id="confirmPassword"
              formControlName="confirmPassword"
              placeholder="********"
              [class.invalid]="confirmPassword?.invalid && confirmPassword?.touched"
            />
            <button
              type="button"
              class="toggle-password"
              (click)="togglePasswordVisibility('confirmPassword')"
            >
              {{ showConfirmPassword() ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}
            </button>
          </div>
          @if (confirmPassword?.invalid && confirmPassword?.touched) {
            <span class="error-message">
              @if (confirmPassword?.errors?.['required']) {
                ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù…Ø·Ù„ÙˆØ¨
              }
              @if (confirmPassword?.errors?.['passwordMismatch']) {
                ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± Ù…ØªØ·Ø§Ø¨Ù‚Ø©
              }
            </span>
          }
        </div>
      </div>

      <div class="form-group checkbox-group">
        <label>
          <input type="checkbox" formControlName="acceptTerms" />
          <span>Ø£ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ <a href="#" target="_blank">Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…</a></span>
        </label>
        @if (acceptTerms?.invalid && acceptTerms?.touched) {
          <span class="error-message">ÙŠØ¬Ø¨ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…</span>
        }
      </div>

      <button
        type="submit"
        class="btn-primary"
        [disabled]="loading()"
      >
        @if (loading()) {
          <span class="spinner"></span>
          Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨...
        } @else {
          Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨
        }
      </button>
    </form>

    <div class="register-footer">
      <p>Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ Ø¨Ø§Ù„ÙØ¹Ù„ØŸ <a routerLink="/auth/login">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a></p>
    </div>
  </div>
</div>
