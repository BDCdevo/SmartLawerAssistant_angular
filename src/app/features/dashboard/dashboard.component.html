<section class="dashboard-container">
  <!-- Welcome Hero Section -->
  <div class="welcome-hero">
    <div class="hero-content">
      <div class="hero-brand">
        <img [src]="logoPath" alt="Smart Lawyer Logo" class="brand-logo">
        <div class="brand-text">
          <h1 class="brand-title">Ø§Ù„Ù…Ø­Ø§Ù…ÙŠ Ø§Ù„Ø°ÙƒÙŠ</h1>
          <p class="brand-subtitle">Smart Lawyer Assistant</p>
        </div>
      </div>

      <div class="hero-info">
        <div class="typewriter-box">
          <span class="typewriter-icon">âš¡</span>
          <span class="typewriter-text">{{ typedText() }}</span>
          <span class="cursor">|</span>
        </div>

        <button class="refresh-btn" (click)="loadDashboardData()" [disabled]="loading()">
          <span class="refresh-icon">ğŸ”„</span>
          <span>ØªØ­Ø¯ÙŠØ«</span>
        </button>
      </div>
    </div>

    <!-- Quick Stats -->
    <div class="quick-stats">
      <div class="stat-item stat-primary">
        <div class="stat-icon">âš–ï¸</div>
        <div class="stat-content">
          <div class="stat-value">{{ stats().totalCases }}</div>
          <div class="stat-label">Ù…Ù„Ù Ù‚Ø¶Ø§Ø¦ÙŠ</div>
        </div>
      </div>

      <div class="stat-item stat-success">
        <div class="stat-icon">ğŸ‘¥</div>
        <div class="stat-content">
          <div class="stat-value">{{ stats().totalClients }}</div>
          <div class="stat-label">Ù…ÙˆÙƒÙ„ Ù…Ø³Ø¬Ù„</div>
        </div>
      </div>

      <div class="stat-item stat-warning">
        <div class="stat-icon">ğŸ“…</div>
        <div class="stat-content">
          <div class="stat-value">{{ stats().upcomingHearings }}</div>
          <div class="stat-label">Ù…ÙˆØ¹Ø¯ Ù…Ù‚Ø¨Ù„</div>
        </div>
      </div>
    </div>
  </div>

  @if (loading()) {
    <div class="loading-overlay">
      <div class="spinner-container">
        <div class="spinner"></div>
        <p>Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŒ ÙŠÙØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±...</p>
      </div>
    </div>
  }

  @if (error()) {
    <div class="error-message">
      <span class="error-icon">âš ï¸</span>
      <div class="error-content">
        <h3>Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø­Ø¯Ø« Ø®Ø·Ø£</h3>
        <p>{{ error() }}</p>
      </div>
      <button class="retry-btn" (click)="loadDashboardData()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©</button>
    </div>
  }

  @if (!loading() && !error()) {
    <!-- Key Statistics Cards -->
    <div class="stats-grid">
      <div class="stat-card primary">
        <div class="stat-header">
          <div class="stat-icon">âš–ï¸</div>
          <span class="stat-badge">+12%</span>
        </div>
        <div class="stat-body">
          <h3 class="stat-value">{{ stats().totalCases }}</h3>
          <p class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù‚Ø¶Ø§ÙŠØ§</p>
          <div class="stat-footer">
            <span class="stat-detail">{{ stats().activeCases }} Ù†Ø´Ø·Ø©</span>
          </div>
        </div>
      </div>

      <div class="stat-card success">
        <div class="stat-header">
          <div class="stat-icon">âœ…</div>
          <span class="stat-badge success">+8%</span>
        </div>
        <div class="stat-body">
          <h3 class="stat-value">{{ stats().closedCases }}</h3>
          <p class="stat-label">Ø§Ù„Ù‚Ø¶Ø§ÙŠØ§ Ø§Ù„Ù…ØºÙ„Ù‚Ø©</p>
          <div class="stat-footer">
            <span class="stat-detail">{{ stats().pendingCases }} Ù…Ø¹Ù„Ù‚Ø©</span>
          </div>
        </div>
      </div>

      <div class="stat-card info">
        <div class="stat-header">
          <div class="stat-icon">ğŸ‘¥</div>
          <span class="stat-badge info">+5%</span>
        </div>
        <div class="stat-body">
          <h3 class="stat-value">{{ stats().totalClients }}</h3>
          <p class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</p>
          <div class="stat-footer">
            <span class="stat-detail">Ù†Ø´Ø· Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±</span>
          </div>
        </div>
      </div>

      <div class="stat-card warning">
        <div class="stat-header">
          <div class="stat-icon">ğŸ“…</div>
          <span class="stat-badge warning">Ù‚Ø±ÙŠØ¨Ø§Ù‹</span>
        </div>
        <div class="stat-body">
          <h3 class="stat-value">{{ stats().upcomingHearings }}</h3>
          <p class="stat-label">Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©</p>
          <div class="stat-footer">
            <span class="stat-detail">Ø®Ù„Ø§Ù„ 7 Ø£ÙŠØ§Ù…</span>
          </div>
        </div>
      </div>

      <div class="stat-card document">
        <div class="stat-header">
          <div class="stat-icon">ğŸ“„</div>
          <span class="stat-badge">Ø¬Ø¯ÙŠØ¯</span>
        </div>
        <div class="stat-body">
          <h3 class="stat-value">{{ stats().totalDocuments }}</h3>
          <p class="stat-label">Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª</p>
          <div class="stat-footer">
            <span class="stat-detail">ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Charts and Statistics Section -->
    <div class="charts-grid">
      <!-- Cases by Status -->
      <div class="chart-card">
        <div class="card-header">
          <h2>ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù‚Ø¶Ø§ÙŠØ§ Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø©</h2>
          <button class="icon-btn">ğŸ“Š</button>
        </div>
        <div class="card-content">
          @if (stats().casesByStatus && stats().casesByStatus.length > 0) {
            <div class="status-distribution">
              @for (item of stats().casesByStatus; track item.status) {
                <div class="status-item">
                  <div class="status-bar-container">
                    <div class="status-bar-header">
                      <span class="status-name">{{ getStatusLabel(item.status) }}</span>
                      <span class="status-count">{{ item.count }}</span>
                    </div>
                    <div class="status-bar">
                      <div
                        class="status-bar-fill"
                        [style.width.%]="item.percentage"
                        [style.background-color]="getStatusColor(item.status)">
                      </div>
                    </div>
                    <span class="status-percentage">{{ item.percentage }}%</span>
                  </div>
                </div>
              }
            </div>
          } @else {
            <div class="empty-chart">
              <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…ØªØ§Ø­Ø©</p>
            </div>
          }
        </div>
      </div>

      <!-- Cases by Priority -->
      <div class="chart-card">
        <div class="card-header">
          <h2>ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù‚Ø¶Ø§ÙŠØ§ Ø­Ø³Ø¨ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©</h2>
          <button class="icon-btn">ğŸ¯</button>
        </div>
        <div class="card-content">
          @if (stats().casesByPriority && stats().casesByPriority.length > 0) {
            <div class="priority-grid">
              @for (item of stats().casesByPriority; track item.priority) {
                <div class="priority-card" [style.border-color]="getPriorityColor(item.priority)">
                  <div class="priority-header">
                    <h4>{{ getPriorityLabel(item.priority) }}</h4>
                  </div>
                  <div class="priority-value" [style.color]="getPriorityColor(item.priority)">
                    {{ item.count }}
                  </div>
                  <div class="priority-percentage">
                    {{ item.percentage }}%
                  </div>
                </div>
              }
            </div>
          } @else {
            <div class="empty-chart">
              <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…ØªØ§Ø­Ø©</p>
            </div>
          }
        </div>
      </div>
    </div>

    <!-- Recent Activities and Quick Actions -->
    <div class="content-grid">
      <!-- Recent Activities -->
      <div class="activity-card">
        <div class="card-header">
          <h2>Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„Ø£Ø®ÙŠØ±Ø©</h2>
          <a routerLink="/activity-log" class="view-all-link">Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„ â†’</a>
        </div>
        <div class="card-content">
          @if (recentActivities() && recentActivities().length > 0) {
            <div class="activities-timeline">
              @for (activity of recentActivities(); track activity.id) {
                <div class="activity-item">
                  <div class="activity-icon-wrapper">
                    <span class="activity-icon">{{ getActivityIcon(activity.type) }}</span>
                  </div>
                  <div class="activity-content">
                    <div class="activity-header">
                      <span class="activity-type">{{ getActivityTypeLabel(activity.type) }}</span>
                      <span class="activity-time">{{ getTimeAgo(activity.timestamp) }}</span>
                    </div>
                    <p class="activity-description">{{ activity.description }}</p>
                  </div>
                </div>
              }
            </div>
          } @else {
            <div class="empty-state">
              <span class="empty-icon">ğŸ“­</span>
              <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ù†Ø´Ø·Ø© Ø­Ø¯ÙŠØ«Ø©</p>
            </div>
          }
        </div>
      </div>

      <!-- Quick Actions Panel -->
      <div class="actions-card">
        <div class="card-header">
          <h2>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø³Ø±ÙŠØ¹Ø©</h2>
        </div>
        <div class="card-content">
          <div class="quick-actions-grid">
            <a routerLink="/cases/new" class="action-card">
              <div class="action-icon primary">âš–ï¸</div>
              <h3>Ù‚Ø¶ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©</h3>
              <p>Ø¥Ø¶Ø§ÙØ© Ù‚Ø¶ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„Ù†Ø¸Ø§Ù…</p>
            </a>

            <a routerLink="/clients/new" class="action-card">
              <div class="action-icon success">ğŸ‘¤</div>
              <h3>Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯</h3>
              <p>ØªØ³Ø¬ÙŠÙ„ Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯</p>
            </a>

            <a routerLink="/documents/upload" class="action-card">
              <div class="action-icon info">ğŸ“„</div>
              <h3>Ø±ÙØ¹ Ù…Ø³ØªÙ†Ø¯</h3>
              <p>Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ†Ø¯ Ø¬Ø¯ÙŠØ¯</p>
            </a>

            <a routerLink="/ai-assistant" class="action-card">
              <div class="action-icon warning">ğŸ¤–</div>
              <h3>Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ</h3>
              <p>Ø§Ø³ØªØ´Ø§Ø±Ø© Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© Ø°ÙƒÙŠØ©</p>
            </a>

            <a routerLink="/appointments/new" class="action-card">
              <div class="action-icon document">ğŸ“…</div>
              <h3>Ø­Ø¬Ø² Ù…ÙˆØ¹Ø¯</h3>
              <p>Ø¬Ø¯ÙˆÙ„Ø© Ù…ÙˆØ¹Ø¯ Ø¬Ø¯ÙŠØ¯</p>
            </a>

            <a routerLink="/reports" class="action-card">
              <div class="action-icon primary">ğŸ“Š</div>
              <h3>Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</h3>
              <p>Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©</p>
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Monthly Statistics -->
    @if (stats().monthlyStats && stats().monthlyStats.length > 0) {
      <div class="monthly-stats-card">
        <div class="card-header">
          <h2>Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø´Ù‡Ø±ÙŠØ©</h2>
          <button class="export-btn">
            <span>ğŸ“¥</span>
            ØªØµØ¯ÙŠØ±
          </button>
        </div>
        <div class="card-content">
          <div class="monthly-stats-grid">
            @for (stat of stats().monthlyStats; track stat.month + stat.year) {
              <div class="monthly-stat-item">
                <div class="month-header">
                  <h4>{{ stat.month }} {{ stat.year }}</h4>
                </div>
                <div class="month-stats">
                  <div class="month-stat">
                    <span class="stat-label">Ù‚Ø¶Ø§ÙŠØ§ Ø¬Ø¯ÙŠØ¯Ø©</span>
                    <span class="stat-value">{{ stat.totalCases }}</span>
                  </div>
                  <div class="month-stat">
                    <span class="stat-label">Ù‚Ø¶Ø§ÙŠØ§ Ù…ØºÙ„Ù‚Ø©</span>
                    <span class="stat-value success">{{ stat.closedCases }}</span>
                  </div>
                  @if (stat.revenue) {
                    <div class="month-stat">
                      <span class="stat-label">Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</span>
                      <span class="stat-value primary">{{ stat.revenue }} Ø¬.Ù…</span>
                    </div>
                  }
                </div>
              </div>
            }
          </div>
        </div>
      </div>
    }
  }
</section>
