<div class="ai-assistant-container">
  <div class="chat-header">
    <h1>ğŸ¤– Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ Ø§Ù„Ø°ÙƒÙŠ</h1>
    <p>Ø§Ø·Ø±Ø­ Ø£Ø³Ø¦Ù„ØªÙƒ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© ÙˆØ§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ù…Ø³Ø§Ø¹Ø¯Ø© ÙÙˆØ±ÙŠØ©</p>
  </div>

  <div class="chat-container">
    <div class="messages-container">
      @for (message of messages(); track message.id) {
        <div class="message" [class.user-message]="message.role === 'user'" [class.assistant-message]="message.role === 'assistant'">
          <div class="message-avatar">
            {{ message.role === 'user' ? 'ğŸ‘¤' : 'ğŸ¤–' }}
          </div>
          <div class="message-content">
            <div class="message-text">{{ message.content }}</div>
            <div class="message-time">
              {{ message.timestamp | date:'short' }}
            </div>
          </div>
        </div>
      }

      @if (loading()) {
        <div class="message assistant-message">
          <div class="message-avatar">ğŸ¤–</div>
          <div class="message-content">
            <div class="typing-indicator">
              <span></span>
              <span></span>
              <span></span>
            </div>
          </div>
        </div>
      }
    </div>

    <div class="input-container">
      <textarea
        [(ngModel)]="newMessage"
        (keydown.control.enter)="sendMessage()"
        placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§... (Ctrl + Enter Ù„Ù„Ø¥Ø±Ø³Ø§Ù„)"
        rows="3"
        class="message-input"
      ></textarea>
      <button
        (click)="sendMessage()"
        [disabled]="!newMessage().trim() || loading()"
        class="send-button"
      >
        ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„
      </button>
    </div>
  </div>
</div>
