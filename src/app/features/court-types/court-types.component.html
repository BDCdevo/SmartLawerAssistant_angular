<div class="page-container">
  <!-- Compact Header -->
  <div class="page-header-compact">
    <h1 class="header-title">ุฃููุงุน ุงููุญุงูู</h1>
    <div class="header-actions">
      <button class="action-btn btn-secondary" (click)="loadCourtTypes()" [disabled]="loading()">
        <span class="btn-icon" [class.spinning]="loading()">๐</span>
        <span>ุชุญุฏูุซ</span>
      </button>
      <button class="action-btn btn-primary" (click)="openCreateModal()">
        <span class="btn-icon">โ</span>
        <span>ุฅุถุงูุฉ ููุน ุฌุฏูุฏ</span>
      </button>
    </div>
  </div>

  <!-- Compact Filters - Single Row -->
  <div class="filters-compact">
    <div class="search-group">
      <input type="text" placeholder="๐ ุจุญุซ..." [value]="searchTerm()" (input)="searchTerm.set($any($event.target).value); loadCourtTypes()">
    </div>
    <div class="filter-group">
      <select [value]="showActiveOnly() === undefined ? 'all' : (showActiveOnly() ? 'active' : 'inactive')"
              (change)="showActiveOnly.set($any($event.target).value === 'all' ? undefined : $any($event.target).value === 'active'); loadCourtTypes()">
        <option value="all">ุงููู</option>
        <option value="active">ูุดุท</option>
        <option value="inactive">ุบูุฑ ูุดุท</option>
      </select>
    </div>
  </div>

  @if (loading()) {
    <div class="loading"><div class="spinner"></div></div>
  }

  @if (!loading()) {
    <table class="data-table">
      <thead>
        <tr>
          <th>#</th>
          <th>ุงูุงุณู ุจุงูุนุฑุจูุฉ</th>
          <th>ุงูุงุณู ุจุงูุฅูุฌููุฒูุฉ</th>
          <th>ุงูุญุงูุฉ</th>
          <th>ุงูุฅุฌุฑุงุกุงุช</th>
        </tr>
      </thead>
      <tbody>
        @for (item of courtTypes(); track item.id) {
          <tr>
            <td>{{ item.id }}</td>
            <td>{{ item.nameAr }}</td>
            <td>{{ item.nameEn || '-' }}</td>
            <td><span [class]="item.isActive ? 'badge-active' : 'badge-inactive'">{{ item.isActive ? 'ูุดุท' : 'ุบูุฑ ูุดุท' }}</span></td>
            <td class="actions-cell">
              <button class="action-btn btn-edit" (click)="openEditModal(item)">โ๏ธ</button>
              <button class="action-btn btn-delete" (click)="delete(item.id)">๐๏ธ</button>
            </td>
          </tr>
        }
      </tbody>
    </table>
  }

  @if (showModal()) {
    <div class="modal-overlay" (click)="closeModal()">
      <div class="modal" (click)="$event.stopPropagation()">
        <div class="modal-header">
          <h2>{{ isEditMode() ? 'ุชุนุฏูู' : 'ุฅุถุงูุฉ' }} ููุน ูุญููุฉ</h2>
          <button (click)="closeModal()">โ</button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label>ุงูุงุณู ุจุงูุนุฑุจูุฉ *</label>
            <input type="text" [value]="formData().nameAr" (input)="updateField('nameAr', $any($event.target).value)">
          </div>
          <div class="form-group">
            <label>ุงูุงุณู ุจุงูุฅูุฌููุฒูุฉ</label>
            <input type="text" [value]="formData().nameEn" (input)="updateField('nameEn', $any($event.target).value)">
          </div>
          <div class="form-group">
            <label><input type="checkbox" [checked]="formData().isActive" (change)="updateField('isActive', $any($event.target).checked)"> ูุดุท</label>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn-secondary" (click)="closeModal()">ุฅูุบุงุก</button>
          <button class="btn-primary" (click)="save()">ุญูุธ</button>
        </div>
      </div>
    </div>
  }
</div>
